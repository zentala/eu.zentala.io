---
import Layout from '../../layouts/Layout.astro';
import DisplayTitle from '../../components/DisplayTitle.astro';
---

<Layout title="EU Reforms - Benefits for Your Country">
  <main class="container mx-auto max-w-6xl px-4 py-8">
    <DisplayTitle title="How EU Reforms Benefit Your Country" />

    <div class="mb-10 text-xl text-gray-300">
      The proposed reforms for European integration offer different benefits for each country. Discover what your country can gain from these reforms.
    </div>

    <div class="bg-gray-900 p-8 rounded-xl shadow-lg mb-12">
      <h2 class="text-2xl font-bold text-white mb-6">Select Your Country</h2>
      
      <div class="country-selector">
        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
          <button class="country-btn" data-country="germany">Germany</button>
          <button class="country-btn" data-country="france">France</button>
          <button class="country-btn" data-country="poland">Poland</button>
          <button class="country-btn" data-country="spain">Spain</button>
          <button class="country-btn" data-country="italy">Italy</button>
          <button class="country-btn" data-country="sweden">Sweden</button>
          <button class="country-btn" data-country="ukraine">Ukraine</button>
          <button class="country-btn" data-country="netherlands">Netherlands</button>
          <button class="country-btn" data-country="belgium">Belgium</button>
          <button class="country-btn" data-country="czechia">Czechia</button>
          <button class="country-btn" data-country="slovakia">Slovakia</button>
          <button class="country-btn" data-country="hungary">Hungary</button>
          <button class="country-btn" data-country="romania">Romania</button>
          <button class="country-btn" data-country="visegrad">Visegrad Group</button>
          <button class="country-btn" data-country="baltics">Baltic States</button>
          <button class="country-btn" data-country="balkans">Balkan Countries</button>
          <button class="country-btn" data-country="southern">Southern Europe</button>
          <button class="country-btn" data-country="northern">Northern Europe</button>
          <button class="country-btn" data-country="central">Central Europe</button>
          <button class="country-btn" data-country="eastern">Eastern Europe</button>
        </div>
      </div>
    </div>

    <div class="hidden" id="country-browser">
      <div class="mb-4">
        <h3 class="text-xl font-bold text-white mb-2">We detected you're browsing from: <span id="detected-country">Unknown</span></h3>
        <p class="text-gray-300">Would you like to see benefits for this country?</p>
        <div class="mt-4 flex gap-4">
          <button id="use-detected" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md">Yes, show benefits</button>
          <button id="select-different" class="px-4 py-2 bg-gray-700 hover:bg-gray-800 text-white rounded-md">No, I'll select manually</button>
        </div>
      </div>
    </div>

    <!-- Country benefits sections - all initially hidden -->
    <div id="benefits-container" class="hidden">
      <div id="germany-benefits" class="country-benefits hidden">
        <h2 class="text-3xl font-bold text-white mb-6">Benefits for Germany</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
          <div class="bg-blue-900 p-6 rounded-xl shadow-md">
            <h3 class="text-xl font-bold text-white mb-4">Leading the European Robotics Revolution</h3>
            <p class="text-gray-300">Transform Germany's automotive industry strength into robotics leadership, creating a new economic powerhouse that leverages existing industrial expertise.</p>
          </div>
          <div class="bg-blue-900 p-6 rounded-xl shadow-md">
            <h3 class="text-xl font-bold text-white mb-4">Enhanced Skilled Worker Pool</h3>
            <p class="text-gray-300">Benefit from easier movement of skilled professionals with English integration, addressing Germany's demographic challenges and labor shortages.</p>
          </div>
          <div class="bg-blue-900 p-6 rounded-xl shadow-md">
            <h3 class="text-xl font-bold text-white mb-4">Digital Government Efficiency</h3>
            <p class="text-gray-300">Lead in the development of shared eGovernment platforms that dramatically reduce administrative costs while improving service delivery.</p>
          </div>
          <div class="bg-blue-900 p-6 rounded-xl shadow-md">
            <h3 class="text-xl font-bold text-white mb-4">Strategic Position in European Logistics</h3>
            <p class="text-gray-300">Leverage Germany's central position with unified logistics systems, strengthening its role as Europe's transportation and distribution hub.</p>
          </div>
        </div>
      </div>

      <div id="france-benefits" class="country-benefits hidden">
        <h2 class="text-3xl font-bold text-white mb-6">Benefits for France</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
          <div class="bg-blue-900 p-6 rounded-xl shadow-md">
            <h3 class="text-xl font-bold text-white mb-4">Cultural Leadership in Digital Europe</h3>
            <p class="text-gray-300">Position France as a cultural leader in the new European digital landscape, influencing development of European media and cultural initiatives.</p>
          </div>
          <div class="bg-blue-900 p-6 rounded-xl shadow-md">
            <h3 class="text-xl font-bold text-white mb-4">Energy System Integration</h3>
            <p class="text-gray-300">Extend France's nuclear expertise across Europe through integrated energy systems, while developing new renewable technologies.</p>
          </div>
          <div class="bg-blue-900 p-6 rounded-xl shadow-md">
            <h3 class="text-xl font-bold text-white mb-4">Enhanced European Defense Cooperation</h3>
            <p class="text-gray-300">Lead development of joint European defense capabilities supported by improved communication through language integration.</p>
          </div>
          <div class="bg-blue-900 p-6 rounded-xl shadow-md">
            <h3 class="text-xl font-bold text-white mb-4">Agricultural Modernization</h3>
            <p class="text-gray-300">Combine France's agricultural strength with autonomous farming technology to create the world's most advanced sustainable food production system.</p>
          </div>
        </div>
      </div>

      <div id="poland-benefits" class="country-benefits hidden">
        <h2 class="text-3xl font-bold text-white mb-6">Benefits for Poland</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
          <div class="bg-blue-900 p-6 rounded-xl shadow-md">
            <h3 class="text-xl font-bold text-white mb-4">Software Development Hub</h3>
            <p class="text-gray-300">Leverage Poland's growing software talent to become Europe's robotics software development center, creating high-value tech jobs.</p>
          </div>
          <div class="bg-blue-900 p-6 rounded-xl shadow-md">
            <h3 class="text-xl font-bold text-white mb-4">Logistics Equalization</h3>
            <p class="text-gray-300">Overcome geographic disadvantages through unified logistics networks that put Polish businesses on equal footing with Western Europe.</p>
          </div>
          <div class="bg-blue-900 p-6 rounded-xl shadow-md">
            <h3 class="text-xl font-bold text-white mb-4">Enhanced Eastern Partnership</h3>
            <p class="text-gray-300">Strengthen Poland's role as a bridge between the EU and Eastern neighbors, particularly Ukraine, through improved logistics and digital integration.</p>
          </div>
          <div class="bg-blue-900 p-6 rounded-xl shadow-md">
            <h3 class="text-xl font-bold text-white mb-4">Accelerated Economic Growth</h3>
            <p class="text-gray-300">Speed convergence with Western European economies through improved labor mobility, reduced administrative barriers, and better access to EU markets.</p>
          </div>
        </div>
      </div>

      <!-- Template for other countries -->
      <div id="default-benefits" class="country-benefits hidden">
        <h2 class="text-3xl font-bold text-white mb-6">Benefits for Your Country</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
          <div class="bg-blue-900 p-6 rounded-xl shadow-md">
            <h3 class="text-xl font-bold text-white mb-4">Economic Integration</h3>
            <p class="text-gray-300">Benefit from reduced barriers to trade and enhanced economic cooperation across the EU.</p>
          </div>
          <div class="bg-blue-900 p-6 rounded-xl shadow-md">
            <h3 class="text-xl font-bold text-white mb-4">Digital Transformation</h3>
            <p class="text-gray-300">Access unified digital government services and infrastructure, reducing administrative costs.</p>
          </div>
          <div class="bg-blue-900 p-6 rounded-xl shadow-md">
            <h3 class="text-xl font-bold text-white mb-4">Enhanced Mobility</h3>
            <p class="text-gray-300">Easier movement of goods and people through unified logistics networks and language integration.</p>
          </div>
          <div class="bg-blue-900 p-6 rounded-xl shadow-md">
            <h3 class="text-xl font-bold text-white mb-4">Shared Innovation</h3>
            <p class="text-gray-300">Participate in joint development of advanced technologies and services like healthcare and education.</p>
          </div>
        </div>
      </div>
    </div>
  </main>
</Layout>

<style>
  .country-btn {
    background-color: rgba(59, 130, 246, 0.2);
    border: 1px solid rgba(59, 130, 246, 0.5);
    color: white;
    padding: 0.75rem;
    border-radius: 0.5rem;
    font-weight: 500;
    transition: all 0.2s;
  }
  
  .country-btn:hover {
    background-color: rgba(59, 130, 246, 0.4);
    transform: translateY(-2px);
  }
  
  .country-btn.active {
    background-color: rgb(37, 99, 235);
    border-color: rgb(37, 99, 235);
  }
</style>

<script>
  // Country detection and selection
  document.addEventListener('DOMContentLoaded', () => {
    const countryButtons = document.querySelectorAll('.country-btn');
    const benefitsContainer = document.getElementById('benefits-container');
    const countryBenefits = document.querySelectorAll('.country-benefits');
    const defaultBenefits = document.getElementById('default-benefits');
    
    // Show specific country benefits
    const showCountryBenefits = (country: string) => {
      // Hide all benefits sections
      countryBenefits.forEach(section => {
        section.classList.add('hidden');
      });
      
      // Show benefits container
      const benefitsContainerElement = benefitsContainer as HTMLElement;
      if (benefitsContainerElement) {
        benefitsContainerElement.classList.remove('hidden');
      }
      
      // Show specific country benefits or default if not found
      const targetSection = document.getElementById(`${country}-benefits`);
      if (targetSection) {
        targetSection.classList.remove('hidden');
      } else if (defaultBenefits) {
        defaultBenefits.classList.remove('hidden');
        // Update the title to show selected country
        const defaultTitle = defaultBenefits.querySelector('h2');
        if (defaultTitle) {
          defaultTitle.textContent = `Benefits for ${country.charAt(0).toUpperCase() + country.slice(1)}`;
        }
      }
      
      // Update active button
      countryButtons.forEach(btn => {
        if (btn.dataset.country === country) {
          btn.classList.add('active');
        } else {
          btn.classList.remove('active');
        }
      });
      
      // Scroll to benefits
      benefitsContainer.scrollIntoView({ behavior: 'smooth' });
    };
    
    // Add click listeners to country buttons
    countryButtons.forEach(button => {
      button.addEventListener('click', () => {
        const country = button.dataset.country;
        showCountryBenefits(country);
      });
    });
    
    // TODO: Implement geolocation detection 
    // This would be expanded in a future version
    
    // For demo purposes only - Uncomment for real implementation
    /*
    // Try to detect user's country
    fetch('https://ipapi.co/json/')
      .then(response => response.json())
      .then(data => {
        const countryBrowser = document.getElementById('country-browser');
        const detectedCountry = document.getElementById('detected-country');
        
        if (data && data.country_name) {
          countryBrowser.classList.remove('hidden');
          detectedCountry.textContent = data.country_name;
          
          // Set up buttons
          document.getElementById('use-detected').addEventListener('click', () => {
            showCountryBenefits(data.country_code.toLowerCase());
            countryBrowser.classList.add('hidden');
          });
          
          document.getElementById('select-different').addEventListener('click', () => {
            countryBrowser.classList.add('hidden');
          });
        }
      })
      .catch(error => {
        console.error('Could not detect country:', error);
      });
    */
  });
</script>