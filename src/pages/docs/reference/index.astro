---
import { getCollection } from 'astro:content';
import Layout from '../../../layouts/Layout.astro';

const referenceDocs = await getCollection('docs', (entry) => {
  return entry.slug.startsWith('reference/');
});

// Sort alphabetically
referenceDocs.sort((a, b) => a.data.title.localeCompare(b.data.title));
---

<Layout title="Reference Documentation">
  <div class="bg-gray-900 min-h-screen">
    <main class="container mx-auto max-w-6xl px-4 py-8">
      <div class="mb-8">
        <a href="/docs" class="text-blue-400 hover:text-blue-300 flex items-center gap-2 mb-4">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
          </svg>
          Back to Documentation
        </a>
        <h1 class="text-4xl md:text-5xl font-bold text-white mb-6">Reference Materials</h1>
        <p class="text-xl text-gray-300">Supporting documents and references for the EU Reform Vision.</p>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12">
        {referenceDocs.length > 0 ? (
          referenceDocs.map(doc => (
            <a href={`/docs/${doc.slug}`} class="group">
              <div class="bg-gray-800 hover:bg-gray-700 rounded-lg p-6 transition-all duration-300 h-full border border-gray-700 hover:border-blue-600 flex flex-col">
                <h3 class="text-xl font-semibold text-white mb-2 group-hover:text-blue-400">{doc.data.title}</h3>
                {doc.data.description && (
                  <p class="text-gray-400 text-sm mb-4 flex-grow">{doc.data.description}</p>
                )}
                <div class="flex justify-between items-center mt-2">
                  <span class="text-blue-400 text-sm">View reference</span>
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-blue-400 group-hover:translate-x-1 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                  </svg>
                </div>
              </div>
            </a>
          ))
        ) : (
          <div class="col-span-3 bg-gray-800 rounded-lg p-8 text-center">
            <p class="text-gray-400 mb-4">No reference documents found.</p>
            <p class="text-gray-500">Reference materials will be added as the vision evolves.</p>
          </div>
        )}
      </div>
      
      <div class="relative p-8 bg-gray-800 rounded-xl border border-gray-700 mb-12">
        <div class="absolute inset-0 bg-gradient-to-b from-blue-900/20 to-transparent opacity-30 blur-xl"></div>
        <div class="relative">
          <h2 class="text-2xl font-bold text-white mb-4">Why References Matter</h2>
          <p class="text-gray-300 mb-6">The EU Reform Vision is built on rigorous research and analysis. Reference materials provide supporting evidence, context, and detailed explanations for the proposals and concepts presented in the main vision document.</p>
          
          <div class="flex items-center gap-6 text-sm text-gray-400">
            <span class="flex items-center gap-2">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
              </svg>
              Verified Information
            </span>
            <span class="flex items-center gap-2">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
              </svg>
              Updated Regularly
            </span>
            <span class="flex items-center gap-2">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z" />
              </svg>
              Deep Analysis
            </span>
          </div>
        </div>
      </div>
      
      <div class="mt-16 flex justify-between items-center">
        <a href="/docs" class="text-blue-400 hover:text-blue-300 flex items-center gap-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 17l-5-5m0 0l5-5m-5 5h12" />
          </svg>
          All Documents
        </a>
        
        <a href="/docs/all" class="inline-flex items-center gap-2 bg-blue-700 hover:bg-blue-600 text-white font-medium px-4 py-2 rounded-lg transition-all">
          Complete Vision Overview
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
          </svg>
        </a>
      </div>
    </main>
  </div>
</Layout>