---
import EuropeMap from './EuropeMap.astro';
import EUStatisticsChart from './EUStatisticsChart.astro';

interface Props {
  color?: string;
}

const { color = "blue" } = Astro.props;

// Dynamically determine background color
let bgColorClass = "bg-gray-800/30";
let borderColorClass = "border-gray-700/50";

if (color === "blue") {
  bgColorClass = "bg-blue-900/30";
  borderColorClass = "border-blue-700/50";
} else if (color === "indigo") {
  bgColorClass = "bg-indigo-900/30";
  borderColorClass = "border-indigo-700/50";
} else if (color === "teal") {
  bgColorClass = "bg-teal-900/30";
  borderColorClass = "border-teal-700/50";
}

// Sample statistics for EU - normally these would come from an API
const languageStats = [
  { label: 'English', value: 51, color: 'rgba(54, 162, 235, 0.8)' },
  { label: 'German', value: 32, color: 'rgba(75, 192, 192, 0.8)' },
  { label: 'French', value: 26, color: 'rgba(153, 102, 255, 0.8)' },
  { label: 'Italian', value: 16, color: 'rgba(255, 159, 64, 0.8)' },
  { label: 'Spanish', value: 15, color: 'rgba(255, 99, 132, 0.8)' },
  { label: 'Polish', value: 11, color: 'rgba(255, 206, 86, 0.8)' }
];

const digitalAdoptionData = [
  { label: 'Denmark', value: 87.1, color: 'rgba(75, 192, 192, 0.8)' },
  { label: 'Finland', value: 85.2, color: 'rgba(54, 162, 235, 0.8)' },
  { label: 'Netherlands', value: 84.5, color: 'rgba(153, 102, 255, 0.8)' },
  { label: 'Sweden', value: 83.9, color: 'rgba(131, 193, 91, 0.8)' },
  { label: 'Ireland', value: 79.5, color: 'rgba(255, 159, 64, 0.8)' },
  { label: 'EU Average', value: 62.8, color: 'rgba(255, 99, 132, 0.8)' },
  { label: 'Romania', value: 37.3, color: 'rgba(255, 206, 86, 0.8)' },
  { label: 'Bulgaria', value: 36.4, color: 'rgba(231, 233, 237, 0.8)' }
];

const potentialGains = [
  { label: 'Language Integration', value: 8.5, color: 'rgba(54, 162, 235, 0.8)' },
  { label: 'Digital Administration', value: 10.2, color: 'rgba(75, 192, 192, 0.8)' },
  { label: 'Robotic Reindustrialization', value: 15.6, color: 'rgba(153, 102, 255, 0.8)' },
  { label: 'Unified Logistics', value: 7.8, color: 'rgba(255, 159, 64, 0.8)' },
  { label: 'Cross-border Healthcare', value: 6.2, color: 'rgba(255, 99, 132, 0.8)' }
];
---

<div class={`interactive-section ${bgColorClass} border ${borderColorClass} rounded-xl p-8 shadow-lg`}>
  <h2 class="text-3xl font-bold text-white mb-8">Interactive Data Visualizations</h2>
  
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12">
    <div>
      <EUStatisticsChart
        title="Language Proficiency in EU"
        description="Percentage of EU citizens who speak these languages (as native or foreign)"
        chartType="bar"
        data={languageStats}
        yAxisLabel="Percentage of population"
      />
      
      <EUStatisticsChart
        title="Potential Economic Gains"
        description="Estimated GDP growth (%) from implementing different reform pillars"
        chartType="pie"
        data={potentialGains}
        height="350px"
      />
    </div>
    
    <div>
      <EuropeMap
        title="Country-Specific Benefits"
        countries={[
          {
            code: "DE",
            name: "Germany",
            benefits: [
              "Leadership in robotics manufacturing",
              "Digital government efficiency gains",
              "Expanded market reach through language integration",
              "Industrial transformation support"
            ]
          },
          {
            code: "FR",
            name: "France",
            benefits: [
              "Cultural leadership through unified media",
              "Digital administration cost savings",
              "Reformed logistics for rural areas",
              "Advanced robotics for agriculture"
            ]
          },
          {
            code: "PL",
            name: "Poland",
            benefits: [
              "Access to EU-wide opportunities through English",
              "Increased social mobility",
              "Manufacturing competitiveness through robotization",
              "Digital infrastructure modernization"
            ]
          },
          {
            code: "IT",
            name: "Italy",
            benefits: [
              "Streamlined logistics for improved trade",
              "Tourism enhancement through language integration",
              "Digital public services for aging population",
              "Manufacturing renaissance through robotics"
            ]
          },
          {
            code: "ES",
            name: "Spain",
            benefits: [
              "Improved remote work opportunities",
              "Smart border and migration management",
              "Enhanced digital tourism infrastructure",
              "Agricultural robotization"
            ]
          },
          {
            code: "RO",
            name: "Romania",
            benefits: [
              "Accelerated digital transformation",
              "Software industry growth",
              "Enhanced border security through robotics",
              "Increased language integration with Western Europe"
            ]
          },
          {
            code: "NL",
            name: "Netherlands",
            benefits: [
              "Enhanced logistics network integration",
              "Leadership in automated shipping systems",
              "Water management technology exports",
              "Digital regulatory innovation"
            ]
          },
          {
            code: "SE",
            name: "Sweden",
            benefits: [
              "Leadership in sustainable robotics",
              "Arctic technology development opportunities",
              "Digital public services innovation",
              "Integration with Eastern European markets"
            ]
          }
        ]}
      />
    </div>
  </div>
  
  <div class="mb-8">
    <EUStatisticsChart
      title="Digital Economy and Society Index (DESI) Scores"
      description="Digital adoption levels across different EU countries (2022)"
      chartType="bar"
      data={digitalAdoptionData}
      yAxisLabel="DESI Score"
      xAxisLabel="Country"
    />
  </div>
  
  <div class="text-center mb-10">
    <p class="text-gray-300 italic">
      Note: Data is for illustrative purposes. In a production environment, this would be powered by real-time API data from Eurostat and other official EU sources.
    </p>
  </div>
  
  <div class="flex justify-center">
    <a href="/docs/why" class="px-6 py-3 bg-blue-600 hover:bg-blue-500 text-white font-medium rounded-lg transition-colors duration-300">
      Learn more about the reform benefits
    </a>
  </div>
</div>