document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("algolia-search-input"),n=document.getElementById("algolia-search-results"),d=document.getElementById("search-results-list"),c=document.getElementById("search-loading"),o=document.getElementById("search-no-results"),u=document.getElementById("close-search-btn");if(!t||!n||!d||!c||!o||!u){console.error("Search elements not found");return}const h={search:async(e,s)=>({hits:[]})};let a=null;const r=(e,s)=>{if(!s.trim())return e;try{const i=new RegExp(`(${s.trim().replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi");return e.replace(i,'<span class="search-highlight">$1</span>')}catch{return e}},L=(e,s)=>{if(d.innerHTML="",e.length===0){o.classList.remove("hidden");return}o.classList.add("hidden"),e.forEach(i=>{const l=document.createElement("div");l.className="search-result-item";const p=r(i.title||"Untitled",s),m=i.description?r(i.description,s):i.excerpt?r(i.excerpt,s):"";l.innerHTML=`
          <a href="${i.slug}" class="block">
            <div class="search-result-title">${p}</div>
            ${m?`<div class="search-result-description">${m}</div>`:""}
            <div class="search-result-path">${i.slug}</div>
          </a>
        `,d.appendChild(l)})},g=async e=>{if(!e.trim()){n.classList.add("hidden");return}n.classList.remove("hidden"),d.innerHTML="",c.classList.remove("hidden"),o.classList.add("hidden");try{const{hits:s}=await h.search(e,{attributesToRetrieve:["title","description","excerpt","slug"],hitsPerPage:10});c.classList.add("hidden"),L(s,e)}catch(s){console.error("Error searching:",s),c.classList.add("hidden"),o.classList.remove("hidden")}};t.addEventListener("input",e=>{const i=e.target.value.trim();if(a&&clearTimeout(a),!i){n.classList.add("hidden");return}a=setTimeout(()=>{g(i)},300)}),t.addEventListener("keydown",e=>{if(e.key==="Enter"){e.preventDefault();const s=e.target.value.trim();s&&(window.location.href=`/search?q=${encodeURIComponent(s)}`)}}),t.addEventListener("focus",()=>{t.value.trim()&&n.classList.remove("hidden")}),document.addEventListener("click",e=>{e.target instanceof Node&&!t.contains(e.target)&&!n.contains(e.target)&&n.classList.add("hidden")}),u.addEventListener("click",()=>{n.classList.add("hidden")}),document.addEventListener("keydown",e=>{e.key==="Escape"&&n.classList.add("hidden")})});document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("mobile-menu-button"),n=document.getElementById("mobile-menu");t&&n&&t.addEventListener("click",()=>{n.classList.toggle("hidden")})});window.addEventListener("scroll",function(){const t=document.querySelector("#header .container");t&&(window.scrollY>50?(t.classList.add("py-2"),t.classList.remove("py-4")):(t.classList.add("py-4"),t.classList.remove("py-2")))});document.addEventListener("DOMContentLoaded",()=>{if(window.location.hostname==="localhost"||window.location.hostname.includes("127.0.0.1")||window.location.hostname.includes(".local")){const n=document.querySelectorAll("footer .grid > div:nth-child(3) ul")[0];if(n){const d=document.createElement("li"),c=document.createElement("a");c.href="/ui",c.className="text-gray-400 hover:text-blue-400 transition-colors",c.textContent="UI Demo",d.appendChild(c),n.appendChild(d)}}});
