document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("mobile-menu-button"),o=document.getElementById("mobile-menu");e&&o&&e.addEventListener("click",()=>{o.classList.toggle("hidden")})});window.addEventListener("scroll",function(){const e=document.querySelector("#header .container");e&&(window.scrollY>50?(e.classList.add("py-2"),e.classList.remove("py-4")):(e.classList.add("py-4"),e.classList.remove("py-2")))});document.addEventListener("DOMContentLoaded",()=>{if(window.location.hostname==="localhost"||window.location.hostname.includes("127.0.0.1")||window.location.hostname.includes(".local")){const o=document.querySelectorAll("footer .grid > div:nth-child(3) ul")[0];if(o){const i=document.createElement("li"),c=document.createElement("a");c.href="/ui",c.className="hover:underline transition-colors",c.style.color="var(--color-text-secondary)",c.textContent="UI Demo",i.appendChild(c),o.appendChild(i)}}});let a=null,d="eu_zentala_io";const E={search:async e=>(console.log("Using mock search client with requests:",e),{results:e.map(()=>({hits:[],nbHits:0,page:0,nbPages:0,hitsPerPage:0,exhaustiveNbHits:!0,query:"",params:"",processingTimeMS:0,index:""}))})};function P(){try{if(typeof window<"u"){console.log("Initializing Algolia client...");const e={PUBLIC_APPWRITE_NEWSLETTER_FUNCTION_ID:"67cdf356847084af9bad",PUBLIC_APPWRITE_ENDPOINT:"https://cloud.appwrite.io/v1",PUBLIC_APPWRITE_PROJECT_ID:"eu",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,SITE:void 0,ASSETS_PREFIX:void 0}.PUBLIC_ALGOLIA_APP_ID,o={PUBLIC_APPWRITE_NEWSLETTER_FUNCTION_ID:"67cdf356847084af9bad",PUBLIC_APPWRITE_ENDPOINT:"https://cloud.appwrite.io/v1",PUBLIC_APPWRITE_PROJECT_ID:"eu",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,SITE:void 0,ASSETS_PREFIX:void 0}.PUBLIC_ALGOLIA_SEARCH_ONLY_API_KEY,i={PUBLIC_APPWRITE_NEWSLETTER_FUNCTION_ID:"67cdf356847084af9bad",PUBLIC_APPWRITE_ENDPOINT:"https://cloud.appwrite.io/v1",PUBLIC_APPWRITE_PROJECT_ID:"eu",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,SITE:void 0,ASSETS_PREFIX:void 0}.PUBLIC_ALGOLIA_INDEX_NAME;console.log("Environment variables:",{appId:e?"defined":"undefined",apiKey:o?"defined":"undefined",indexName:i?"defined":"undefined"}),a=E,i&&(d=i),console.log("Using mock Algolia client")}}catch(e){console.error("Error initializing Algolia client:",e),a=E}console.log("Final searchClient type:",typeof a),console.log("Final searchIndex:",d),console.log("Final searchClient methods:",a?Object.keys(a):"none")}P();document.addEventListener("DOMContentLoaded",()=>{console.log("AlgoliaSearch component initializing..."),console.log("searchClient type:",typeof a),console.log("searchClient methods:",a?Object.keys(a):"none"),console.log("searchIndex:",d);const e=document.getElementById("algolia-search-input"),o=document.getElementById("algolia-search-results"),i=document.getElementById("search-results-list"),c=document.getElementById("search-loading"),r=document.getElementById("search-no-results"),m=document.getElementById("close-search-btn");if(!e||!o||!i||!c||!r||!m){console.error("Search elements not found");return}const p={search:async(t,n)=>{console.log("Searching for:",t,n);try{if(a&&typeof a.search=="function"){const s=await a.search([{indexName:d,query:t,params:n}]);return console.log("Search results:",s),{hits:s.results?.[0]?.hits||[]}}else return console.warn("No valid search client available"),{hits:[]}}catch(s){return console.error("Error searching:",s),{hits:[]}}}};let h=null;const u=(t,n)=>{if(!t||!n||!n.trim())return t||"";try{const s=new RegExp(`(${n.trim().replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi");return t.replace(s,'<span class="search-highlight">$1</span>')}catch(s){return console.warn("Error highlighting match:",s),t}},L=(t,n)=>{if(i.innerHTML="",!t||t.length===0){r.classList.remove("hidden");return}r.classList.add("hidden"),t.forEach(s=>{const l=document.createElement("div");l.className="search-result-item";const I=u(s.title||"Untitled",n),g=s.description?u(s.description,n):s.excerpt?u(s.excerpt,n):"";l.innerHTML=`
          <a href="${s.slug||"#"}" class="block">
            <div class="search-result-title">${I}</div>
            ${g?`<div class="search-result-description">${g}</div>`:""}
            <div class="search-result-path">${s.slug||""}</div>
          </a>
        `,i.appendChild(l)})},f=async t=>{if(!t||!t.trim()){o.classList.add("hidden");return}o.classList.remove("hidden"),i.innerHTML="",c.classList.remove("hidden"),r.classList.add("hidden");try{console.log("Performing search for:",t);const{hits:n}=await p.search(t,{attributesToRetrieve:["title","description","excerpt","slug"],hitsPerPage:10});console.log("Search results:",n.length),c.classList.add("hidden"),L(n,t)}catch(n){console.error("Error searching:",n),c.classList.add("hidden"),r.classList.remove("hidden")}};e.addEventListener("input",t=>{const s=t.target.value.trim();h&&clearTimeout(h),h=setTimeout(()=>{f(s)},300)}),m.addEventListener("click",()=>{o.classList.add("hidden"),e.value=""}),document.addEventListener("click",t=>{const n=document.querySelector(".algolia-search-wrapper");n&&!n.contains(t.target)&&o.classList.add("hidden")}),document.addEventListener("keydown",t=>{t.key==="Escape"&&o.classList.add("hidden")}),console.log("AlgoliaSearch component initialized")});document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("theme-toggle");e&&e.addEventListener("click",()=>{const o=document.documentElement.classList.toggle("dark");try{const i=window;if(typeof i.themeUtils?.setTheme=="function")i.themeUtils.setTheme(o?"dark":"light");else try{const c=new Date;c.setDate(c.getDate()+30),document.cookie=`theme=${o?"dark":"light"};expires=${c.toUTCString()};path=/;SameSite=Lax`}catch(c){console.warn("Error setting theme cookie:",c);try{typeof localStorage<"u"&&localStorage.setItem("theme",o?"dark":"light")}catch(r){console.warn("Error saving theme preference to localStorage:",r)}}}catch(i){console.warn("Error saving theme preference:",i)}})});
